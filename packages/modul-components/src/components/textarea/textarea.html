<div class="m-textarea"
     :class="{ 'm--is-disabled' : isDisabled,
               'm--is-waiting' : isWaiting,
               'm--is-readonly' : isReadonly,
               'm--has-error' : hasTextareaError,
               'm--is-valid' : isTextareaValid,
               'm--is-focus' : isFocus,
               'm--has-label': hasLabel,
               'm--has-validation-message': hasValidationMessage }"
     @click="onClick"
     :style="{ width: inputWidth, maxWidth: inputMaxWidth }">
    <m-input-style
        :disabled="isDisabled"
        :waiting="isWaiting"
        :error="hasTextareaError"
        :valid="isTextareaValid"
        :label="label"
        :label-id="labelId"
        :label-for="id"
        :focus="isFocus"
        :label-up="labelUp"
        :empty="isEmpty"
        :readonly="isReadonly"
        :required-marker="requiredMarker"
        :tag-style="tagStyle"
    >
        <textarea
            v-model="model"
            v-m-textarea-auto-height
            ref="input"
            :id="id"
            class="m-textarea__input"
            :disabled="isDisabled || isWaiting"
            :readonly="isReadonly"
            :placeholder="placeholder"
            :maxlength="maxLengthNumber"
            :autocomplete="autocomplete"
            rows="1"
            :aria-invalid="hasTextareaError"
            :aria-describedby="inputAriaDescribedby"
            :aria-activedescendant="inputAriaActivedescendant"
            :aria-autocomplete="inputAriaAutocomplete"
            :aria-controls="inputAriaControls"
            @focus="onFocus"
            @blur="onBlur"
            @change="onChange"
            @keyup="onKeyup"
            @keydown="onKeydown"
            @paste="onPaste"
        ></textarea>
    </m-input-style>
    <div
        :id="inputAriaDescribedby"
        class="m-textarea__validation"
        aria-live="polite"
    >
        <m-validation-message
            class="m-textarea__validation__message"
            :disabled="isDisabled"
            :waiting="isWaiting"
            :error="hasTextareaError"
            :error-message="errorMessage"
            :valid="isTextareaValid"
            :valid-message="validMessage"
            :helper-message="helperMessage"
        />
        <m-character-count
            v-if="characterCount"
            class="m-textarea__validation__character-count"
            :value-length="valueLength"
            :max-length="maxLength"
            :threshold="characterCountThreshold"
        />
    </div>
</div>
