<m-modal class="m-photo-editor"
         :open="open"
         :title="i18nTitleModal"
         :size="modalSize"
         :close-on-backdrop="false"
         @close="close"
         ref="modal">
    <m-icon-button class="m-photo-editor__delete"
                   icon-name="m-svg__delete"
                   icon-size="20px"
                   :title="i18nDelete"
                   :skin="skinDelete"
                   @click="deleteImage"
                   ref="deleteButton"></m-icon-button>
    <m-image-displayer v-if="modeSelect"
                       :url-photo="urlPhoto"></m-image-displayer>
    <m-crop-image v-else
                  :image="imageToCrop"
                  @image-cropped="confirmImage"
                  ref="cropImage"></m-crop-image>

    <template #footer>
        <m-file-select v-if="modeSelect"
                       class="m-photo-editor__button"
                       :store-name="storeName"
                       :full-size="true"
                       :multiple="false"
                       :keep-store="true"
                       :label="i18nChoosePhoto"
                       :skin="primaryButton"
                       :allowed-extensions="allowedExtensions"
                       @file-selected="replaceImage"
                       ref="fileSelect"></m-file-select>
        <m-button v-else
                  :skin="primaryButton"
                  :full-size="true"
                  :waiting="savingInProgress"
                  @click="crop"
                  ref="cropButton">{{ i18nSave }}</m-button>
        <m-button class="m-photo-editor__cancel"
                  :skin="secondaryButton"
                  :full-size="true"
                  :disabled="savingInProgress"
                  @click="cancel"
                  ref="cancelButton">{{ i18nCancel }}</m-button>
    </template>

</m-modal>
